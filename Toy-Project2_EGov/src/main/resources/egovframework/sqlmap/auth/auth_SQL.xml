<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="auth">

	<typeAlias  alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
	<typeAlias  alias="mainVO" type="main.service.MainVO"/>

	<insert id="auth.insertJoin">
		INSERT INTO USERS
						(id, password, name, phone, email, gender)
					VALUES
						(TRIM(#id#), TRIM(#password#), TRIM(#name#), TRIM(#phone#), TRIM(#email#), #gender#)
	</insert>
	
	<select id="auth.selectLogin" resultClass="java.lang.Integer">
		SELECT COUNT(*) FROM USERS
								WHERE id = #id#
								AND password = #password#
	</select>
	
	<select id="auth.duplicatedID" resultClass="java.lang.Integer">
		SELECT COUNT(*) FROM USERS
								WHERE id = #id#
	</select>
	
	<select id="auth.authFindIdCheckEmail" resultClass="mainVO">
		SELECT * FROM USERS
							WHERE name = #name#
							AND email = #email#
	</select>
	
	<select id="auth.authFindIdCheckPhone" resultClass="mainVO">
		SELECT * FROM USERS
							WHERE name = #name#
							AND phone = #phone#
	</select>
	
	<select id="auth.authIdCheck" resultClass="java.lang.Integer">
		SELECT COUNT(*) FROM USERS
								WHERE id = #id#
	</select>
	
	<update id="auth.authPwReset">
		UPDATE USERS SET password = #password#
											WHERE id = #id#
	</update>
	
	<select id="auth.selectUser" resultClass="mainVO">
		SELECT * FROM USERS
						WHERE id = #id#
	</select>
	
	<select id="auth.SelectPwCheck" resultClass="java.lang.Integer">
		SELECT COUNT(*) FROM USERS
								WHERE id = #id#
								AND password = #password#
	</select>
	
	<update id="auth.updateUserInfo">
		UPDATE USERS SET name = #name#,
						phone = #phone#,
						email = #email#,
						gender = #gender#
						WHERE
						id = #id#
						
	</update>
	
	<delete id="auth.deleteLeaveUser">
		DELETE FROM USERS
						WHERE id = #id#
						AND password = #password#
	</delete>
</sqlMap>